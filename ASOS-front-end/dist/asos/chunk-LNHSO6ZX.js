import{B as o,d as i,fb as n,gb as s,hb as p,vb as h,y as a}from"./chunk-KAOPS22R.js";var H=(()=>{class r{constructor(e){this._Http=e,this.baseUrl=h.apiUrl,this.stripePublishableKey="pk_test_51RC6glQ8RaciZnLJ27ML29PDXDMNBdUEj6nIhdNkEWcvwM0hTXJ82Etv9Eapbd3lpHse7NoFX9C7veCWblmHLY6000u7j9chus",this.stripe=Stripe(this.stripePublishableKey)}getUserOrders(e){return this._Http.get(`${this.baseUrl}/Order/user-orders`,{headers:this.getHeaders(),params:new s().set("userId",e)})}redirectToPayment(e){return i(this,null,function*(){try{let t=yield this.stripe.redirectToCheckout({clientSecret:e});if(t.error)throw new Error(t.error.message)}catch(t){throw t}})}getStripeKey(){return this.stripePublishableKey}getHeaders(){let e=localStorage.getItem("token");return new n({Authorization:`Bearer ${e}`,"Content-Type":"application/json"})}confirmPayment(e){return this._Http.post(`${this.baseUrl}/Webhook/${e}`,null,{headers:this.getHeaders()})}createOrder(e,t,c){let d=new s().set("cartId",e).set("address",t).set("phoneNumber",c);return this._Http.post(`${this.baseUrl}/Order/create`,null,{headers:this.getHeaders(),params:d})}completeOrder(e){return this._Http.post(`${this.baseUrl}/Order/complete?orderId=${e}`,{},{headers:this.getHeaders()})}static{this.\u0275fac=function(t){return new(t||r)(o(p))}}static{this.\u0275prov=a({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{H as a};
